!function(e,t){"use strict";function o(o,n){var c=e.extend(!0,{duration:200,effect:{open:e.fn.fadeIn,close:e.fn.fadeOut},overlay:{opacity:.6,zIndex:9e3},fixOverlay:!1,offset:t,zIndex:0,closeClass:q+"-close",force:!1,child:t},n);return c.overlay.fillColor=c.overlay.fillColor||c.overlay.color||"#888",c.zIndex=c.zIndex||c.overlay.zIndex+1,f(c.offset,t,c),y||(y=e(window).resize(function(){O&&a(O)}),m=e('<div class="'+q+'-overlay" />').css({position:"fixed",left:0,top:0,width:"100%",height:"150%",display:"none"}).appendTo(h=e("body")).click(i).on("touchmove",function(){return!1}),e(document).focusin(function(t){O&&!O.has(t.target).length&&(z?z.focus():e(document.activeElement).blur())}).keydown(function(e){return O&&27===e.keyCode?i(e):void 0})),o.each(function(){var t=e(this),o={position:"fixed",display:"none",zIndex:c.zIndex};f(c.offset,o),d(c.closeClass,t),e.each([["open",j],["close",E],["beforeopen",L],["beforeclose",A]],function(e,o){var n=o[0],i=o[1];"function"==typeof c[n]&&t.off(i,c[n]).on(i,c[n])}),t.css(o).data(T,e.extend(!0,{},c)).appendTo(h).on("touchmove",function(){return!1})})}function n(n,r){function s(e){var t=e.data(T);return t.child&&t.child.index(P)>-1}function f(){v=t,P.find("a,input,select,textarea,button,object,area,img,map").each(function(){var t=e(this);return t.focus().get(0)===document.activeElement?(z=t,!1):void 0}),x&&(w.jqActive&&w.jqActive.length&&w.jqActive.focus(),w=t),O=P,P.trigger(j)}var u,d,x,q,E,A,D,B,H,P=n.length?n.eq(0):t;return p||!P?n:((r||!(u=P.data(T)))&&(u=o(P,r).data(T)),!g&&v&&v.get(0)!==P.get(0)&&(u.force||s(v))&&(v.stop(!0,!0),m.stop(!0,!0)),A=O&&O.get(0)!==P.get(0),!w&&!g&&A&&s(O)&&(w={parent:O,child:P.insertAfter(O),jqActive:e(document.activeElement).blur()}),!g&&A&&(u.force||w)?(g=P,i(O)):null===O&&(p=!0,d=e.Event(L,{cancelable:!0}),P.trigger(d),d.isDefaultPrevented()||(E=!g&&!w&&!u.fixOverlay,w&&(x=P.get(0)===w.parent.get(0),q=P.get(0)===w.child.get(0)),E&&(C||(D=h.get(0).style,C={overflow:D.overflow},B=h.prop("clientWidth"),H=h.prop("clientHeight"),h.css("overflow","hidden"),B-=h.prop("clientWidth"),H-=h.prop("clientHeight"),C.marginRight=D.marginRight,C.marginBottom=D.marginBottom,0>B&&h.css("marginRight","+="+-B),0>H&&h.css("marginBottom","+="+-H)),b=e(document.activeElement).blur(),I===t&&(I=y.scrollLeft(),k=y.scrollTop(),y.scroll(l))),z=null,a(P,u),window.setTimeout(function(){x?f():(u.effect.open.call(v=P,u.duration,f),q&&c(w.parent,!0,u.duration))},0),E&&m.css({backgroundColor:u.overlay.fillColor,zIndex:u.overlay.zIndex}).fadeTo(u.duration,u.overlay.opacity),O=0),p=!1),n)}function i(o){function i(){var i;v=t,d&&(C&&(h.css(C),C=t),b&&b.length&&b.focus(),I!==t&&(y.off("scroll",l).scrollLeft(I).scrollTop(k),I=t)),O=null,i=e.Event(E),z?i.from=o:g&&(i.from=g),a.trigger(i),g?(n(g),g=t):u&&n(w.parent)}var a,r,s,f,u,d,x,z=o instanceof e.Event;return!p&&O&&(p=!0,a=z||o.index(O)>-1?O:t,a&&(s=e.Event(A,{cancelable:!0}),z?s.from=o:g&&(s.from=g),a.trigger(s),s.isDefaultPrevented()?g=t:(r=a.data(T),d=!g&&!w&&!r.fixOverlay,w&&(f=a.get(0)===w.parent.get(0),u=a.get(0)===w.child.get(0)),x=g?0:r.duration,window.setTimeout(function(){f?i():(r.effect.close.call(v=a,x,i),u&&c(w.parent,!1,r.duration))},0),d&&m.fadeOut(x),O=0)),p=!1),z?(o.preventDefault(),!1):o}function c(e,o,n,i){function c(e){m.css("opacity",(1-a.overlay.opacity)/(1-e)*-1+1)}var a,r=e.length?e.eq(0):t;r&&(a=r.data(T))&&(o===t&&(o=!0),n=n||a.duration,x=x||m.clone(!0).appendTo(h),m.stop(!0).css({backgroundColor:a.overlay.fillColor,zIndex:a.overlay.zIndex}),x.stop(!0).css({backgroundColor:a.overlay.fillColor,zIndex:a.zIndex}).insertAfter(r),o?(m.css({opacity:a.overlay.opacity,display:"block"}),x.css({opacity:0,display:"block"}).animate({opacity:a.overlay.opacity},{duration:n,step:c,complete:function(){m.css("display","none"),i&&i()}})):(m.css({opacity:0,display:"block"}),x.css({opacity:a.overlay.opacity,display:"block"}).animate({opacity:0},{duration:n,step:c,complete:function(){x.css("display","none"),i&&i()}})))}function a(e,t){var o;t=t||e.data(T),"function"==typeof t.offset&&(o=t.offset.call(e))&&e.css({left:o.left,top:o.top,marginLeft:"",marginTop:""})}function r(){this.css({left:"50%",top:"50%",marginLeft:"-"+this.outerWidth()/2+"px",marginTop:"-"+this.outerHeight()/2+"px"})}function l(e){return y.scrollLeft(I).scrollTop(k),e.preventDefault(),!1}function s(n,i,c){function a(e,t,n){var i=e.data(T)||o(e).data(T);if(i.hasOwnProperty(t)){if(3===arguments.length)switch(t){case"offset":f(n,e,i);break;case"zIndex":u(n,e,i);break;case"closeClass":d(n,e,i);break;default:i[t]=n}return i[t]}}return 2===arguments.length&&"string"==typeof i?n.length?a(n.eq(0),i):t:n.each("string"==typeof i?function(){a(e(this),i,c)}:function(){var t=e(this);e.each(i,function(e,o){a(t,e,o)})})}function f(e,t,o){var n;e?"function"==typeof e&&(e=function(e){return function(){var t=this;return e.call(t,function(){r.call(t)})}}(e)):e=r,!t||"function"==typeof e||o&&"function"!=typeof o.offset&&o.offset.left===e.left&&o.offset.top===e.top||(n=t.jquery?{}:t,n.left=e.left,n.top=e.top,n.marginLeft=n.marginTop="",t.jquery&&t.css(n)),o&&(o.offset=e,t&&O&&t.get(0)===O.get(0)&&a(t,o))}function u(e,t,o){!t||o&&o.zIndex===e||t.css("zIndex",e),o&&(o.zIndex=e)}function d(e,t,o){t&&o&&o.closeClass&&o.closeClass!==e&&t.find("."+o.closeClass).off("click",i),!t||!e||o&&o.closeClass===e||t.find("."+e).off("click",i).click(i),o&&(o.closeClass=e)}var p,g,v,y,h,m,x,b,z,C,I,k,w,T="plainModal",q=T.toLowerCase(),j=q+"open",E=q+"close",L=q+"beforeopen",A=q+"beforeclose",O=null;e.fn[T]=function(e,t,a,r){return"open"===e?n(this,t):"close"===e?i(this):"blur"===e?c(this,t,a,r):"option"===e?arguments.length<=2?s(this,t):s(this,t,a):o(this,e)}}(jQuery);